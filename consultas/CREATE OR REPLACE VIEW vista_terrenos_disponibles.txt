CREATE OR REPLACE VIEW vista_terrenos_disponibles AS
SELECT producto.id AS producto_id, sector.id as sector_id, recinto.id AS recinto_id, lote.id AS lote_id, nicho.id as id, sector.nombre as sector, recinto.nombre as recinto, ('Nicho') as tipo, fila, columna, precio.monto FROM nicho LEFT JOIN lote ON lote.id = nicho.lote_id LEFT JOIN producto on producto.id = lote.producto_id LEFT JOIN recinto ON nicho.recinto_id = recinto.id LEFT JOIN sector ON recinto.sector_id = sector.id LEFT JOIN precio ON precio.producto_id = producto.id WHERE lote.disponible = 1 AND precio.activo = 1
UNION 
SELECT producto.id AS producto_id, sector.id as sector_id, (null) AS recinto_id, lote.id AS lote_id, terreno.id as id, sector.nombre as sector, ('') as recinto, ('Terreno') as tipo, fila, lote, precio.monto FROM terreno LEFT JOIN lote ON lote.id = terreno.lote_id LEFT JOIN producto ON producto.id = lote.producto_id LEFT JOIN sector ON terreno.sector_id = sector.id LEFT JOIN precio ON precio.producto_id = producto.id WHERE lote.disponible = 1 AND precio.activo = 1;